// ┌──────────────────────────────────────────────────────────────────────────────────────┐ \\
// │ Eve 0.3.2 - JavaScript Events Library                                                │ \\
// ├──────────────────────────────────────────────────────────────────────────────────────┤ \\
// │ Copyright (c) 2008-2011 Dmitry Baranovskiy (http://dmitry.baranovskiy.com/)          │ \\
// │ Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license. │ \\
// └──────────────────────────────────────────────────────────────────────────────────────┘ \\
function classtweak(a,b,c){function f(b){for(var c=a.length;c--;){var g=a[c],h=g.className?g.className.split(/\s+/).sort():[],i;typeof b=="string"&&(b=b.split(d));for(i=b.length;i--;){var j=b[i],k=j.slice(0,1),l=j.slice(-1),m=j.slice(1),n=e[k],o=k=="."||l==".",p,q=-1;n||(o?(n=e[k=="."&&l=="."?"!":k=="."?"+":"-"],m=j.slice(k=="."?1:0,l=="."?-1:undefined)):(n=e["+"],m=b[i]));for(p=h.length;q<0&&p--;)h[p]===m&&(q=p);n(h,m,q)}g.className=h.join(" ")}return f}if(!a)return undefined;var d=/[\s\,]+/,e={"+":function(a,b,c){c<0&&(a[a.length]=b)},"-":function(a,b,c){c>=0&&a.splice(c,1)},"!":function(a,b,c){e[c<0?"+":"-"](a,b,c)}};return typeof a=="string"||a instanceof String?a=(c||document).querySelectorAll(a):Array.isArray(a)||(a=[a]),b&&f(b),b?classtweak:f}(function(a){var b="0.3.2",c="hasOwnProperty",d=/[\.\/]/,e="*",f=function(){},g=function(a,b){return a-b},h,i,j={n:{}},k=function(a,b){var c=j,d=i,e=Array.prototype.slice.call(arguments,2),f=k.listeners(a),l=0,m=!1,n,o=[],p={},q=[],r=[];h=a,i=0;for(var s=0,t=f.length;s<t;s++)"zIndex"in f[s]&&(o.push(f[s].zIndex),f[s].zIndex<0&&(p[f[s].zIndex]=f[s]));o.sort(g);while(o[l]<0){n=p[o[l++]],q.push(n.apply(b,e));if(i)return i=d,q}for(s=0;s<t;s++){n=f[s];if("zIndex"in n)if(n.zIndex==o[l]){q.push(n.apply(b,e));if(i)return i=d,q;do{l++,n=p[o[l]],n&&q.push(n.apply(b,e));if(i)return i=d,q}while(n)}else p[n.zIndex]=n;else{q.push(n.apply(b,e));if(i)return i=d,q}}return i=d,q.length?q:null};k.listeners=function(a){var b=a.split(d),c=j,f,g,h,i,k,l,m,n,o=[c],p=[];for(i=0,k=b.length;i<k;i++){n=[];for(l=0,m=o.length;l<m;l++){c=o[l].n,g=[c[b[i]],c[e]],h=2;while(h--)f=g[h],f&&(n.push(f),p=p.concat(f.f||[]))}o=n}return p},k.on=function(a,b){var c=a.split(d),e=j;for(var g=0,h=c.length;g<h;g++)e=e.n,!e[c[g]]&&(e[c[g]]={n:{}}),e=e[c[g]];e.f=e.f||[];for(g=0,h=e.f.length;g<h;g++)if(e.f[g]==b)return f;return e.f.push(b),function(a){+a==+a&&(b.zIndex=+a)}},k.stop=function(){i=1},k.nt=function(a){return a?(new RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)")).test(h):h},k.unbind=function(a,b){var f=a.split(d),g,h,i,k=[j];for(var l=0,m=f.length;l<m;l++)for(var n=0;n<k.length;n+=i.length-2){i=[n,1],g=k[n].n;if(f[l]!=e)g[f[l]]&&i.push(g[f[l]]);else for(h in g)g[c](h)&&i.push(g[h]);k.splice.apply(k,i)}for(l=0,m=k.length;l<m;l++){g=k[l];while(g.n){if(b){if(g.f){for(n=0,jj=g.f.length;n<jj;n++)if(g.f[n]==b){g.f.splice(n,1);break}!g.f.length&&delete g.f}for(h in g.n)if(g.n[c](h)&&g.n[h].f){var o=g.n[h].f;for(n=0,jj=o.length;n<jj;n++)if(o[n]==b){o.splice(n,1);break}!o.length&&delete g.n[h].f}}else{delete g.f;for(h in g.n)g.n[c](h)&&g.n[h].f&&delete g.n[h].f}g=g.n}}},k.version=b,k.toString=function(){return"You are running Eve "+b},typeof module!="undefined"&&module.exports?module.exports=k:a.eve=k})(this),function(a,b){a([],function(){function a(){}function d(){function o(a,b,c){return l(a,b,c)}function p(a){n("resolve",a)}function q(a){n("reject",a)}function r(a){m(a)}function s(a){while(i){var c,d,f,g;c=i,d=c.deferred,i=i.next,g=c[a];if(g)try{f=g(h),e(f)?k(f,d):d[a](f===b?h:f)}catch(j){d.reject(j)}}}var a,f,g,h,i,j,l,m,n;return l=function(a,b,c){var e,f;return f={deferred:e=d(),resolve:a,reject:b,progress:c},i?j=j.next=f:i=j=f,e.promise},m=function(a){var b,c;b=i;while(b)c=b.progress,c&&c(a),b=b.next},n=function(a,b){var c=l;l=function d(b,d){var e=c(b,d);return s(a),e},n=m=function(){throw new Error("already completed")},h=b,s(a)},a={},f=a.promise={then:a.then=o},g=a.resolver={resolve:a.resolve=p,reject:a.reject=q,progress:a.progress=r},c(f),c(g),a}function e(a){return a&&typeof a.then=="function"}function f(a,b,c,f){var g,h,i;return g=d(),h=b?b:function(a){return a},i=c?c:function(a){return a},e(a)?(a.then(h,i,function(a){f(a)}),k(a,g)):g.resolve(h(a)),g.promise}function g(b,c,e,g,h){function p(a){m(a)}function q(a){n(a)}function r(a){o(a)}var i,j,k,l,m,n,o;i=Math.max(0,Math.min(c,b.length)),j=[],l=d(),k=e||g||h?l.then(e,g,h):l.promise,m=function(b){j.push(b),--i===0&&(m=o=a,l.resolve(j))},n=function(b){n=o=a,l.reject(b)},o=function(a){l.progress(a)};if(i===0)l.resolve(j);else{var s,t=0;while(s=b[t++])f(s,p,q,r)}return k}function h(a,b,c,d){return g(a,a.length,b,c,d)}function i(a,b,c,d){return g(a,1,b,c,d)}function j(a,b,c){var d,e;return d=f(a),e=arguments.length>2?function(a){return k(d,a,c)}:function(a){return k(d,a)},e(b),e(f.defer()).promise}function k(a,b,c){return a.then(arguments.length>2?function(){b.resolve(c)}:b.resolve,b.reject,b.progress),b}var c=Object.freeze||a;return f.defer=d,f.isPromise=e,f.some=g,f.all=h,f.any=i,f.chain=j,f})}(typeof define!="undefined"?define:typeof module!="undefined"?function(a,b){module.exports=b()}:function(a,b){this.when=b()});var Pager=function(a,b){function i(){var b=a.querySelector("section.p-active")||a.querySelector('section[data-route="/"]')||a.querySelector("section");return{data:{},element:b}}function j(a){for(var b=0;b<h.length;b++)if(h[b].regex.test(a))return h[b];return undefined}function k(a){var b=a.target||a.srcElement;while(b instanceof Text)b=b.parentNode;n(b)&&a.preventDefault()}function l(){var b,d,f,g;if(typeof a=="string"||a instanceof String)a=document.querySelector("#"+a);if(!a||!a.querySelector)throw new Error("A containing element is required to create a new app");if(a.id)for(b in e)e[b]+="."+a.id;d=a.querySelectorAll("*[data-route]");for(f=0;f<d.length;f++)m(d[f]);a.addEventListener("touchstart",k,!1),a.addEventListener("click",k,!1),classtweak(a,"+p-container"),a===document.body&&classtweak(a.parentNode,"+p-container"),eve(e.init,c,a),p(),setTimeout(function(){classtweak(a,"+p-ready")},10)}function m(b){var d=b.getAttribute("data-route"),e={},f=b.dataset,i,j;if(d===""||d==="/")d="home";f||(f=b.attribiutes);for(i in f)if(!g||g.test(i))e[i]=f[i];a.id&&(e.appid=a.id),h.push(j={data:e,regex:new RegExp("^"+d),element:b}),eve.on(d,function(){return this===c})}function n(a){var b=!1;if(a&&a.href){var d=a?a.getAttribute("href")||"home":"",e=eve(d,c,a.href);f=[],b=e&&e.length;for(var g=0;b&&g<e.length;g++)typeof e[g]!="undefined"&&(b=b&&e[g],f.push(e[g]));b&&p(d)}return b}function o(a,b,c){var d=!0;for(var e=0;a&&e<a.length;e++)d=d&&(typeof a[e]=="undefined"||a[e]),d&&typeof a[e]!="undefined"&&f.push(a[e]);d&&when.all([].concat(f),b,c)}function p(b){var f=j(b)||i(),g=f.data||{};f&&f.element&&o(eve(e.activating,c,f,d),function(){classtweak("section","-p-active",a)(f.element,"+p-active"),document.title=g.title||document.title,eve(e.change,c,f,d),d=f})}b=b||{},b.title=b.title||"Untitled App";var c,d,e={activating:"pager.activating",change:"pager.change",init:"pager.init"},f=[],g=/^data\-/i,h=[];return c={activate:p},l(),c};