function classtweak(a,b,c){function f(b){for(var c=a.length;c--;){var g=a[c],h=g.className?g.className.split(/\s+/).sort():[],i;typeof b=="string"&&(b=b.split(d));for(i=b.length;i--;){var j=b[i],k=j.slice(0,1),l=j.slice(-1),m=j.slice(1),n=e[k],o=k=="."||l==".",p,q=-1;n||(o?(n=e[k=="."&&l=="."?"!":k=="."?"+":"-"],m=j.slice(k=="."?1:0,l=="."?-1:undefined)):(n=e["+"],m=b[i]));for(p=h.length;q<0&&p--;)h[p]===m&&(q=p);n(h,m,q)}g.className=h.join(" ")}return f}if(!a)return undefined;var d=/[\s\,]+/,e={"+":function(a,b,c){c<0&&(a[a.length]=b)},"-":function(a,b,c){c>=0&&a.splice(c,1)},"!":function(a,b,c){e[c<0?"+":"-"](a,b,c)}};return typeof a=="string"||a instanceof String?a=typeof qsa=="function"?qsa(a,c):(c||document).querySelectorAll(a):a.splice||(a=[a]),b&&f(b),b?classtweak:f}(function(a){var b="0.3.4",c="hasOwnProperty",d=/[\.\/]/,e="*",f=function(){},g=function(a,b){return a-b},h,i,j={n:{}},k=function(a,b){var c=j,d=i,e=Array.prototype.slice.call(arguments,2),f=k.listeners(a),l=0,m=!1,n,o=[],p={},q=[],r=h,s=[];h=a,i=0;for(var t=0,u=f.length;t<u;t++)"zIndex"in f[t]&&(o.push(f[t].zIndex),f[t].zIndex<0&&(p[f[t].zIndex]=f[t]));o.sort(g);while(o[l]<0){n=p[o[l++]],q.push(n.apply(b,e));if(i)return i=d,q}for(t=0;t<u;t++){n=f[t];if("zIndex"in n)if(n.zIndex==o[l]){q.push(n.apply(b,e));if(i)break;do{l++,n=p[o[l]],n&&q.push(n.apply(b,e));if(i)break}while(n)}else p[n.zIndex]=n;else{q.push(n.apply(b,e));if(i)break}}return i=d,h=r,q.length?q:null};k.listeners=function(a){var b=a.split(d),c=j,f,g,h,i,k,l,m,n,o=[c],p=[];for(i=0,k=b.length;i<k;i++){n=[];for(l=0,m=o.length;l<m;l++){c=o[l].n,g=[c[b[i]],c[e]],h=2;while(h--)f=g[h],f&&(n.push(f),p=p.concat(f.f||[]))}o=n}return p},k.on=function(a,b){var c=a.split(d),e=j;for(var g=0,h=c.length;g<h;g++)e=e.n,!e[c[g]]&&(e[c[g]]={n:{}}),e=e[c[g]];e.f=e.f||[];for(g=0,h=e.f.length;g<h;g++)if(e.f[g]==b)return f;return e.f.push(b),function(a){+a==+a&&(b.zIndex=+a)}},k.stop=function(){i=1},k.nt=function(a){return a?(new RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)")).test(h):h},k.unbind=function(a,b){var f=a.split(d),g,h,i,k,l,m,n,o=[j];for(k=0,l=f.length;k<l;k++)for(m=0;m<o.length;m+=i.length-2){i=[m,1],g=o[m].n;if(f[k]!=e)g[f[k]]&&i.push(g[f[k]]);else for(h in g)g[c](h)&&i.push(g[h]);o.splice.apply(o,i)}for(k=0,l=o.length;k<l;k++){g=o[k];while(g.n){if(b){if(g.f){for(m=0,n=g.f.length;m<n;m++)if(g.f[m]==b){g.f.splice(m,1);break}!g.f.length&&delete g.f}for(h in g.n)if(g.n[c](h)&&g.n[h].f){var p=g.n[h].f;for(m=0,n=p.length;m<n;m++)if(p[m]==b){p.splice(m,1);break}!p.length&&delete g.n[h].f}}else{delete g.f;for(h in g.n)g.n[c](h)&&g.n[h].f&&delete g.n[h].f}g=g.n}}},k.once=function(a,b){var c=function(){var d=b.apply(this,arguments);return k.unbind(a,c),d};return k.on(a,c)},k.version=b,k.toString=function(){return"You are running Eve "+b},typeof module!="undefined"&&module.exports?module.exports=k:typeof define!="undefined"?define("eve",[],function(){return k}):a.eve=k})(this),function(a){a(function(){function d(){}function e(a){return new Array(a)}function f(){}function g(){function p(a,b,c){return m(a,b,c)}function q(a){o("resolve",a)}function r(a){o("reject",a)}function s(a){n(a)}function t(a){var b,d,e,f,g,l=0;g=k,k=[];while(b=g[l++]){d=b.deferred,f=b[a];try{e=f?f(j):j,h(e)?i(e,d.resolve,d.reject,d.progress):d[a](e===c?j:e)}catch(m){d.reject(m)}}}var b,d,e,j,k,l,m,n,o;return k=[],l=[],m=function(b,c,d){var e,f,h=arguments.length;while(h){e=arguments[--h];if(e!=null&&typeof e!="function")throw new Error("callback is not a function")}return f=g(),k.push({deferred:f,resolve:b,reject:c}),d&&l.push(d),f.promise},n=function(a){var b,c=0;while(b=l[c++])b(a)},o=function(a,b){var d=m;m=function(c,e){var f=d(c,e);return t(a),f},o=n=function(){throw new Error("already completed")},l=c,j=b,t(a)},b={},d=new f,d.then=b.then=p,b.promise=a(d),e=b.resolver=a({resolve:b.resolve=q,reject:b.reject=r,progress:b.progress=s}),b}function h(a){return a&&typeof a.then=="function"}function i(a,b,c,d){var e=j(a);return e.then(b,c,d)}function j(a){var b,c;return a instanceof f?b=a:(c=g(),h(a)?a.then(c.resolve,c.reject,c.progress):c.resolve(a),b=c.promise),b}function k(a,b,c,e,f){function r(a){m(a)}function s(a){n(a)}function t(a){o(a)}function u(){m=n=o=d}var h,j,k,l,m,n,o,p,q;p=a.length>>>0,h=Math.max(0,Math.min(b,p)),j=[],l=g(),k=i(l,c,e,f);if(!h)l.resolve(j);else{m=function(a){j.push(a),--h||(u(),l.resolve(j))},n=function(a){u(),l.reject(a)},o=l.progress;for(q=0;q<p;++q)q in a&&i(a[q],r,s,t)}return k}function l(a,b,c,d){var f,g;return f=e(a.length),g=p(a,m,f),i(g,b,c,d)}function m(a,b,c){return a[c]=b,a}function n(a,b,c,d){function e(a){return b(a[0])}return k(a,1,e,c,d)}function o(a,b){var c,d;d=a.length,c=e(d);for(;d>=0;--d)d in a&&(c[d]=i(a[d],b));return p(c,m,c)}function p(a,c,d){var e,f;return e=a.length,f=[function(a,b,d){return i(a,function(a){return i(b,function(b){return c(a,b,d,e)})})}],arguments.length>=3&&f.push(d),j(b.apply(a,f))}function q(a,b,c){var d=arguments.length>2;return i(a,function(a){b.resolve(d?c:a)},b.reject,b.progress)}var a,b,c;return a=Object.freeze||function(a){return a},b=[].reduce||function(a){var b,c,d,e,f;f=0,b=Object(this),e=b.length>>>0,c=arguments;if(c.length<=1)for(;;){if(f in b){d=b[f++];break}if(++f>=e)throw new TypeError}else d=c[1];for(;f<e;++f)f in b&&(d=a(d,b[f],f,b));return d},i.defer=g,i.isPromise=h,i.some=k,i.all=l,i.any=n,i.reduce=p,i.map=o,i.chain=q,i})}(typeof define=="function"?define:function(a){typeof module!="undefined"?module.exports=a():this.when=a()});var flip=function(){function h(a,b){var c=a&&a.length;for(var d=0;c&&d<a.length;d++)typeof a[d]!="undefined"&&(c=c&&a[d],b.push(a[d]));return c}function i(a){return a.getAttribute("href")||"home"}function j(a){return f[a]||(f[a]=a.replace(c,"").replace(/\//g,".").replace(d,"")),f[a]}function k(a){return function(b){var c=b.target||b.srcElement,d;while(c instanceof Text)c=c.parentNode;d=a.isRoute(c,b),d.valid&&(b.preventDefault(),a.activate(d.route,d.promises))}}function l(a,b,c,d){var e=!0;for(var f=0;a&&f<a.length;f++)e=e&&(typeof a[f]=="undefined"||a[f]),e&&typeof a[f]!="undefined"&&b.push(a[f]);e&&when.all([].concat(b),c,d)}function m(a,b,c){var d=c.dataset,e,f;if(a===""||a==="/")a="home";if(!d){d={};for(e in routable.attributes)g.test(e)&&(d[RegExp.$1]=routable.attributes[e])}this.data={};for(e in d)this.data[e]=d[e];this.url=a,this.regex=new RegExp("^"+a),this.element=c,this.pageName=j(a),this.flipper=b,this.flipper.on("flip.to."+this.pageName,function(){return!0})}function n(b,c){c=c||{},c.title=c.title||"Untitled App";if(typeof b=="string"||b instanceof String)b=a("#"+b.replace(e,""))[0];this.element=b||document.body,this.id=this.element.id||"flipper_"+(new Date).getTime(),this.routes=[],this.activeRoute=null,this.defaultRoute=null,this.events={activating:"flip.activating",changed:"flip.changed",init:"flip.init"},this.init()}function o(a,c){var d=new n(a,c);return b[d.id]=d,d}var a=function(){var a=/^\.([\w-]+)$/,b=/^#([\w-]+)$/,c=/^[\w-]+$/;return function(d,e){var f;return e=e||document,f=e===document&&b.test(d),f?[e.getElementById(RegExp.$1)]:Array.prototype.slice.call(a.test(d)?e.getElementsByClassName(RegExp.$1):c.test(d)?e.getElementsByTagName(d):e.querySelectorAll(d))}}(),b={},c=/\.\w+$/,d=/^\./,e=/^\#/,f={},g=/^data\-(.*)$/i;return n.prototype.activate=function(a,b,c){var d=this,e,f=[];if(typeof a=="string"||a instanceof String)a=this.findRoute(a);a&&a.element&&when.all(b||[],function(){classtweak(".flip-active","-flip-active",d.element),e=h(eve(d.events.activating,d,a,d.activeRoute,c),f),when.all([e].concat(f),function(){classtweak(a.element,"+flip-active"),eve(d.events.changed,d,a,d.activeRoute,c),d.activeRoute=a})})},n.prototype.findRoute=function(a){for(var b=0;b<this.routes.length;b++)if(this.routes[b].regex.test(a))return this.routes[b];return undefined},n.prototype.init=function(){var b=this,c,d,e,f=k(this),g;if(this.element.id)for(c in this.events)this.events[c]+="."+this.element.id;classtweak(this.element,"+flipper"),d=a("*[data-route]",this.element);for(e=0;e<d.length;e++)this.routes.push(new m(d[e].getAttribute("data-route"),this,d[e]));this.element.addEventListener("touchstart",f,!1),this.element.addEventListener("click",f,!1),g=a(".flip-active",this.element).concat(a('[data-route="/"]',this.element),a("section, .section",this.element))[0],g&&(this.defaultRoute=new m(g.getAttribute("data-route"),this,g)),eve(this.events.init,this,this.element),this.activate(this.defaultRoute),setTimeout(function(){classtweak(b.element,"+flip-ready")},10)},n.prototype.isRoute=function(a,b){var c=!1,d,e,f,g=this.activeRoute,k=[];return a&&a.href&&(d=i(a),f="flip.to."+j(d)+"."+this.id,c=g&&g.path===d,c||(g=this.findRoute(d),e=g?eve(f,this,g,this.activeRoute,b):null,c=h(e,k))),{valid:c,route:g,promises:k}},n.prototype.on=function(a,b){eve.on(a+"."+this.id,b)},o.get=function(a){return b[a]},o}()